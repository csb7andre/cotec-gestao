<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COTEC | Gest√£o Policial</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
    <script defer src="app.js"></script>
    <link rel="icon" type="image/png" href="1770196336247.png">
    <link rel="manifest" href="manifest.json">
</head>
<body>

<nav class="navbar">          
    <div class="nav-brand">
        <img src="LOGO.jpg" alt="Logo" class="brand-logo" onerror="this.style.display='none'">
        <div class="brand-text">
            <h1>COTEC</h1>
            <span>COORDENA√á√ÉO DE GEST√ÉO DE TECNOLOGIAS POLICIAIS</span>
        </div>
    </div>
</nav>

<main class="container">
    <div class="dashboard-grid">
        <aside class="config-sidebar">
            <section class="glass-card">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px">
                    <h3>Equipe</h3>
                    <button class="btn-sm-sync" onclick="carregarDadosDoServidor()">üîÑ</button>
                </div>
                <div class="input-group">
                    <input id="novoMembro" placeholder="Nome...">
                    <button class="btn-accent" onclick="addMembro()">+</button>
                </div>
                <ul id="listaMembros" class="item-list"></ul>
            </section>
            <section class="glass-card" style="margin-top:20px">
                <h3>Tarefas Base</h3>
                <div class="input-group">
                    <input id="novaTarefa" placeholder="Tarefa...">
                    <button class="btn-accent" onclick="addTarefa()">+</button>
                </div>
                <ul id="listaTarefas" class="item-list"></ul>
            </section>
        </aside>

        <div class="operational-area">
            <div class="selection-row" style="display:flex; gap:15px; margin-bottom:20px">
                <section class="glass-card" style="flex:1">
                    <h3>Presen√ßa</h3>
                    <div id="presentes" class="chip-container"></div>
                </section>
                <section class="glass-card" style="flex:1">
                    <h3>Ativar na Escala</h3>
                    <div id="tarefasHoje" class="chip-container"></div>
                </section>
            </div>

            <section class="glass-card">
                <div style="display:flex; justify-content:space-between">
                    <h3>Distribui√ß√£o</h3>
                    <button class="btn-reset" onclick="resetarPainelEscala()">Limpar</button>
                </div>
                <div id="painelTarefas" class="painel-tarefas-grid"></div>
            </section>

            <div style="margin-top:20px; display:flex; gap:10px;">
                <button class="btn-mega" onclick="gerarEscala('HOJE')">GERAR ESCALA DO DIA</button>
                <button class="btn-mega btn-secundario" onclick="abrirModalData()">ESCALA OUTRA DATA</button>
            </div>
            
            <section id="resultSection" class="glass-card hidden" style="margin-top:20px">
                <h3 id="tituloEscalaGerada"></h3>
                <div id="resultado"></div>
                <div class="export-controls" style="margin-top:15px">
                    <button class="btn-exp" onclick="executarExport('print')">Imprimir</button>
                    <button class="btn-exp" onclick="executarExport('word')">Word</button>
                    <button class="btn-exp" style="color:#25D366; border-color:#25D366" onclick="executarExport('whats')">WhatsApp</button>
                </div>
            </section>
        </div>
    </div>

    <hr style="margin:40px 0">

    <section class="glass-card">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px">
            <div class="header-with-sync" onclick="toggleDemandas()">
                <span id="setaDemandas">‚ñº</span>
                <h2 style="margin:0">
                    <span id="tituloDemandas">Acompanhamento de Demandas</span>
                    <span id="contadorDemandas"></span>
                </h2>
                <button class="btn-sm-sync" onclick="event.stopPropagation(); carregarDadosDoServidor()">üîÑ</button>
            </div>
            <button class="btn-accent" onclick="novaDemanda()">+ Nova Demanda</button>
        </div>
        <div id="listaDemandas"></div>
        <div style="margin-top:20px; background:#f1f5f9; padding:15px; border-radius:8px; display:flex; justify-content:space-between;">
             <div>
                <b>Lote:</b>
                <button class="btn-exp" onclick="exportarDemandasLote('whats')">WhatsApp</button>
                <button class="btn-exp" onclick="exportarDemandasLote('word')">Word</button>
             </div>
             <button class="btn-reset" onclick="abrirDemandasConcluidas()">VER CONCLU√çDAS</button>
        </div>
    </section>

    <section class="glass-card" style="margin-top:20px">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px">
            <div class="header-with-sync" onclick="toggleReunioes()">
                <span id="setaReunioes">‚ñº</span>
                <h2 style="margin:0">REUNI√ïES <span id="contadorReunioes"></span></h2>
                <button class="btn-sm-sync" onclick="event.stopPropagation(); carregarDadosDoServidor()">üîÑ</button>
            </div>
            <button class="btn-accent" onclick="novaReuniao()">+ Nova Reuni√£o</button>
        </div>
        <div id="listaReunioes"></div>
    </section>

    <section class="glass-card" style="margin-top:20px">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px">
            <div class="header-with-sync" onclick="toggleProjetos()">
                <span id="setaProjetos">‚ñº</span>
                <h2 style="margin:0">PROJETOS <span id="contadorProjetos"></span></h2>
                <button class="btn-sm-sync" onclick="event.stopPropagation(); carregarDadosDoServidor()">üîÑ</button>
            </div>
            <button class="btn-accent" onclick="novoProjeto()">+ Novo Projeto</button>
        </div>
        <div id="listaProjetos"></div>
    </section>
</main>

<div id="modalSorteio" class="modal"><div class="modal-content"><h3>Sortear</h3><div id="elegiveisContainer" class="chip-container"></div><input type="number" id="qtdTotal" value="1" style="margin-top:10px"><div style="margin-top:10px"><button onclick="confirmarSorteio()">Sortear</button> <button onclick="fecharModal()">Fechar</button></div></div></div>
<div id="modalSorteioDemanda" class="modal"><div class="modal-content"><h3>Sortear Demanda</h3><div id="elegiveisDemandaContainer" class="chip-container"></div><input type="number" id="qtdTotalDem" placeholder="Qtd"><div style="margin-top:10px"><button onclick="confirmarSorteioDemanda()">Sortear</button> <button onclick="fecharModalDemanda()">Fechar</button></div></div></div>
<div id="modalDemandasConcluidas" class="modal"><div class="modal-content" style="max-width:800px"><h3>Conclu√≠das</h3><div id="listaDemandasConcluidas" style="max-height:400px;overflow-y:auto"></div><button style="width:100%;margin-top:10px" onclick="fecharDemandasConcluidas()">Fechar</button></div></div>
<div id="modalProjeto" class="modal"><div class="modal-content" style="max-width:700px"><h3>Descri√ß√£o</h3><div id="editorProjeto" style="height:250px;background:white"></div><button style="width:100%;margin-top:10px" onclick="gravarDescricaoProjeto()">Gravar</button> <button onclick="fecharModalProjeto()" style="margin-top:5px;width:100%;background:#eee">Cancelar</button></div></div>
<div id="modalData" class="modal"><div class="modal-content"><h3>Data</h3><button onclick="definirDataRapida('AMANH√É')">Amanh√£</button> <button onclick="definirDataRapida('SEMANA')">Semana</button><hr><input type="date" id="dataEsp"><button onclick="gerarEscalaCustom('especifica')">Gerar Data</button><hr><input type="date" id="dataIni"><input type="date" id="dataFim"><button onclick="gerarEscalaCustom('periodo')">Gerar Per√≠odo</button><button onclick="fecharModalData()" style="background:#eee;margin-top:10px">Cancelar</button></div></div>

</body>
</html>