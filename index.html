<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COTEC | Gest√£o Policial</title>
    
    <link rel="stylesheet" href="style.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
    
    <meta name="theme-color" content="#0f172a">
    <link rel="apple-touch-icon" href="1770196336247.png">
    <link rel="icon" type="image/png" href="1770196336247.png">
    
    <script defer src="app.js"></script>
</head>

<body>

    <nav class="navbar">          
        <div class="nav-brand">
            <img src="LOGO.jpg" alt="Bras√£o" class="brand-logo" onerror="this.style.display='none'">
            <div class="brand-text">
                <h1>COTEC</h1>
                <span>COORDENA√á√ÉO DE GEST√ÉO DE TECNOLOGIAS POLICIAIS E CREDENCIAMENTO</span>
            </div>
        </div>
        <div class="nav-actions">
            <button class="btn-reset" onclick="carregarDadosDoServidor()" title="For√ßar Atualiza√ß√£o">üîÑ Sincronizar</button>
        </div>
    </nav>

    <main class="container">
        <div class="dashboard-grid">
            
            <aside class="config-sidebar">
                <section class="glass-card">
                    <h3>Equipe</h3>
                    <div class="input-group">
                        <input id="novoMembro" placeholder="Nome...">
                        <button class="btn-accent" onclick="addMembro()">+</button>
                    </div>
                    <ul id="listaMembros" class="item-list"></ul>
                </section>

                <section class="glass-card" style="margin-top:20px">
                    <h3>Tarefas Base</h3>
                    <div class="input-group">
                        <input id="novaTarefa" placeholder="Tarefa...">
                        <button class="btn-accent" onclick="addTarefa()">+</button>
                    </div>
                    <ul id="listaTarefas" class="item-list"></ul>
                </section>
            </aside>

            <div class="operational-area">
                <div class="selection-row" style="display:flex; gap:15px; margin-bottom:20px">
                    <section class="glass-card" style="flex:1">
                        <h3>Presen√ßa</h3>
                        <div id="presentes" class="chip-container"></div>
                    </section>
                    <section class="glass-card" style="flex:1">
                        <h3>Ativar na Escala</h3>
                        <div id="tarefasHoje" class="chip-container"></div>
                    </section>
                </div>

                <section class="glass-card">
                    <div style="display:flex; justify-content:space-between">
                        <h3>Distribui√ß√£o</h3>
                        <button class="btn-reset" onclick="resetarPainelEscala()">Limpar</button>
                    </div>
                    <div id="painelTarefas" class="painel-tarefas-grid"></div>
                </section>

                <div style="margin-top: 20px;">
                    <button class="btn-mega" onclick="alert('Funcionalidade de Gerar Escala simplificada no app.js atualizado. Implemente conforme necessidade.')">GERAR ESCALA (PDF/Visualiza√ß√£o)</button>
                </div>
            </div>
        </div>

        <hr style="margin:40px 0">

        <section class="glass-card">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px">
                <div style="display:flex; align-items:center; gap:10px; cursor:pointer" onclick="toggleDemandas()">
                    <span id="setaDemandas">‚ñº</span>
                    <h2 style="margin:0">
                        <span id="tituloDemandas">Acompanhamento de Demandas</span>
                        <span id="contadorDemandas"></span>
                    </h2>
                </div>
                <button class="btn-accent" onclick="novaDemanda()">+ Nova Demanda</button>
            </div>
            
            <div id="listaDemandas"></div>
            
            <div style="margin-top:20px; background:#f1f5f9; padding:15px; border-radius:8px; display:flex; justify-content:end; gap:10px;">
                 <button class="btn-reset" onclick="alert('Verifique a implementa√ß√£o de Demandas Conclu√≠das no app.js')">VER CONCLU√çDAS</button>
            </div>
        </section>

        <section class="glass-card" style="margin-top: 20px;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px">
                <div style="display:flex; align-items:center; gap:10px; cursor:pointer" onclick="toggleReunioes()">
                    <span id="setaReunioes">‚ñº</span>
                    <h2 style="margin:0">
                        <span>REUNI√ïES</span>
                        <span id="contadorReunioes"></span>
                    </h2>
                </div>
                <button class="btn-accent" onclick="novaReuniao()">+ Nova Reuni√£o</button>
            </div>
            <div id="listaReunioes"></div>
        </section>

        <section class="glass-card" style="margin-top: 20px;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px">
                <div style="display:flex; align-items:center; gap:10px; cursor:pointer" onclick="toggleProjetos()">
                    <span id="setaProjetos">‚ñº</span>
                    <h2 style="margin:0">
                        PROJETOS <span id="contadorProjetos"></span>
                    </h2>
                </div>
                <button class="btn-accent" onclick="novoProjeto()">+ Novo Projeto</button>
            </div>
            <div id="listaProjetos"></div>
        </section>

    </main>

    <div id="modalSorteio" class="modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1000;">
        <div class="modal-content" style="background:white; margin:15% auto; padding:20px; width:300px; border-radius:8px;">
            <h3>Sortear Agente</h3>
            <div id="elegiveisContainer" class="chip-container" style="max-height:200px; overflow-y:auto; margin-bottom:10px;"></div>
            
            <label>Quantidade:</label>
            <input type="number" id="qtdTotal" value="1" min="1" style="width:50px; padding:5px; margin-bottom:10px;">
            
            <div style="display:flex; gap:10px; justify-content:flex-end;">
                <button class="btn-accent" onclick="confirmarSorteio()">Sortear</button>
                <button class="btn-reset" onclick="fecharModal()">Cancelar</button>
            </div>
        </div>
    </div>

    <div id="modalSorteioDemanda" class="modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1000;">
        <div class="modal-content" style="background:white; margin:15% auto; padding:20px; width:300px; border-radius:8px;">
            <h3>Sortear para Demanda</h3>
            <div id="elegiveisDemandaContainer" class="chip-container"></div>
            <input type="number" id="qtdTotalDem" placeholder="Qtd" style="margin:10px 0;">
            <button onclick="confirmarSorteioDemanda()">Sortear</button>
            <button onclick="fecharModalDemanda()">Fechar</button>
        </div>
    </div>

    <div id="modalProjeto" class="modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1000;">
        <div class="modal-content" style="background:white; margin:5% auto; padding:20px; width:80%; max-width:700px; border-radius:8px;">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h3>Detalhes do Projeto</h3>
                <button class="btn-reset" onclick="fecharModalProjeto()">‚úñ</button>
            </div>
            <hr>
            <div id="editorProjeto" style="height:250px; background:white;"></div>
            <hr>
            <button class="btn-accent" style="width:100%" onclick="gravarDescricaoProjeto()">üíæ Gravar Descri√ß√£o</button>
        </div>
    </div>

</body>
</html>